[{"id":0,"href":"/astro-notes/docs/fermi-lat-analysis/","title":"Fermi LAT Analysis","section":"Docs","content":" Fermi LAT Analysis # The Fermi Gamma-ray Space Telescope, formerly GLAST, is opening this high-energy world to exploration and helping us answer these questions. It contains an instrument named Large Area Telescope (LAT), which performs an all-sky survey in the energy range 100 MeV to 500 GeV.\nFermi LAT has the latest 14-year Source Catalog (4FGL-DR4), which contains more than 7000 gamma-ray sources. To visualise their temporal light curves, you can visit LightCurveRepository.\nI will guide you through the installation and analysis of Fermi LAT in the next sections.\n"},{"id":1,"href":"/astro-notes/docs/fermi-lat-analysis/installation/","title":"Installation","section":"Fermi LAT Analysis","content":" Installation # Written byJoysankar Majumdar The Fermi mission provides a suite of tools called the Fermitools for the analysis of LAT. We are not going to use Fermitools directly; rather, we are going to use FermiPy.\nA Linux-based operating system is best for Fermi LAT analysis. We are going to follow the installation procedure for Ubuntu 24.04.2 LTS.\nWe need to install the conda-forge distribution from the GitHub repository. From the latest release, download the Miniforge**-Linux-x86_64.sh file.\nRun this script file with the bash command.\nbash Miniforge3-25.3.1-0-Linux-x86_64.sh It will be installed in your system. Generally, it creates a folder miniforge in the home directory.\nYou need to export the path of the installed miniforge.\nexport PATH=path_to_the_diretory/miniforge/condabin:$PATH And now, in that same terminal, you need to initialise conda.\nconda init Now close this terminal and open another terminal, and it should look like below The (base) indicates the activation of the base environment in conda.\nWe have to create another environment for FermiPy. Run the command below in the terminal.\nmamba create --name fermipy -c conda-forge -c fermi python=3.9 \u0026#34;fermitools\u0026gt;=2.2.0\u0026#34; healpy gammapy After this, to activate the new fermipy environment, run\nmamba activate fermipy You have to install the fermipy package inside the fermipy environment\npip install fermipy Additionally, you should install the Jupyter Notebook for better coding\npip install notebook You have successfully installed fermitools and FermiPy. Make sure to use FermiPy; you need to activate the fermipy environment each time.\n"},{"id":2,"href":"/astro-notes/docs/fermi-lat-analysis/analysis/","title":"Analysis","section":"Fermi LAT Analysis","content":" Analysis # Written byJoysankar Majumdar I will be explaining how you can analyze the point sources detected by Fermi LAT.\nBackground model download # We need to download the latest Galactic interstellar emission model and the Isotropic spectral template from this page. So download the gll_iem_v07.fits and iso_P8R3_SOURCE_V3_v1.txt for Event Selection of Pass 8 Source.\nAdditionally, I will suggest downloading the latest Fermi LAT catalog in FITS format from this link.\nKeep all these files in a separate folder, so that we can use them for each analysis.\nData download # Download the data for your specified source from the link.\nFor time conversion, you can use the xTime tool.\nConventionally, we choose a search radius of 20 $\\degree$. Fermi LAT operates in the energy range ~20 MeV to \u0026gt;300 GeV, but we can generally choose 100 MeV to 500 GeV. We need the spacecraft file also for analysis.\nNow download all the files in a separate folder. Some files will contain PH, and some will contain SC in their names. The PH files hold the photon data, and SC will hold the spacecraft data during that observation. Now, create a file that contains the list of PH files using the code in the terminal opened in the same folder\nls *PH* \u0026gt; ph_list.dat It will create a ph_list.dat file, which will list the PH files.\nMake sure that the folder you create does not contain any spaces; otherwise, your analysis will fail.\nConfiguration file # You need to create a config.yaml file in that folder where the data is located. It is like a simple text file, which contains the configuration information. This file will be structured as below\ndata: evfile : ph_list.dat scfile : L250815080059DAC8B79833_SC00.fits binning: roiwidth : 20.0 binsz : 0.1 binsperdec : 8 selection : emin : 100 emax : 500000 zmax : 90 evclass : 128 evtype : 3 tmin : 757382405.0 tmax : 776908805.0 filter : \u0026#39;DATA_QUAL\u0026gt;0 \u0026amp;\u0026amp; LAT_CONFIG==1\u0026#39; target : \u0026#39;3C 138\u0026#39; gtlike: edisp: true irfs: \u0026#39;P8R3_SOURCE_V3\u0026#39; edisp_disable : [\u0026#39;isodiff\u0026#39;,\u0026#39;galdiff\u0026#39;] model: src_radius : 15.0 catalogs : \u0026#39;/home/joysankar/fermi-catlog/gll_psc_v35.fit\u0026#39; galdiff : \u0026#39;/home/joysankar/fermi-catlog/gll_iem_v07.fits\u0026#39; isodiff : \u0026#39;/home/joysankar/fermi-catlog/iso_P8R3_SOURCE_V3_v1.txt\u0026#39; The evfile is the name of the PH file list, which we have created previously. scfile is the spacecraft file you have already downloaded. Make sure to set emin (MeV), emax(MeV), tmin (MET), and tmax (MET). In target, put the object name, but better to use the 4FGL name. Make sure to give the appropriate path of catalogs, galdiff, and isodiff. binsperdec is a factor that determines the binning.\nNotebook analysis # Now open a terminal in that folder and activate the fermipy environment.\nconda activate fermipy Then open a Jupyter Notebook and run the code attached below step by step.\nfrom fermipy.gtanalysis import GTAnalysis gta = GTAnalysis(\u0026#39;config.yaml\u0026#39;,logging={\u0026#39;verbosity\u0026#39; : 3}) gta.setup() It will take time and perform the initial analysis.\ngta.optimize() It will fit the spectral parameters of the source.\ngta.print_roi() It will show the sources with TS values Now we\u0026rsquo;ll free the sources within the 3$\\degree$ of ROI.\ngta.free_sources(free=False) gta.free_sources(distance=3.0,pars=\u0026#39;norm\u0026#39;) gta.free_source(\u0026#39;4FGL J2321.9+2734\u0026#39;) gta.free_source(\u0026#39;galdiff\u0026#39;) gta.free_source(\u0026#39;isodiff\u0026#39;) You need to fit the parameters by running the code below\ngta.fit() SED analysis # sed = gta.sed(\u0026#39;4FGL J2321.9+2734\u0026#39;,make_plots=True) It will generate a file like 4fgl_j0521.2+1637_sed.fits which will be used for SED plotting.\nLight curve analysis # lc = gta.lightcurve(\u0026#39;4FGL J2321.9+2734\u0026#39;, binsz=21600.0,outdir=\u0026#39;6hrs_dir\u0026#39;, multithread=True, nthread=3, write_fits=True) It will generate a file like 4fgl_j1310.5+3221_lightcurve.fits which will be used for light curve plotting. The binsz is the binning time in seconds. The multithread is for parallel calculation. The outdir is the directory where each bin file will be generated. The nthread is the number of parallel threads. It will take time based on the binning size.\n"}]